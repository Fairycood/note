[TOC]

## 1.计算机网络在信息时代的作用

**互联网基本特点**：

**连通性**：互联网上用户不管距离多远，都能通信，就像这些用户终端都彼此连通
**共享性**：指资源共享，包含信息、**软件**、硬件等共享，就像资源在用户身边

**计算机网络(网络)的组成**：由若干结点和连接这些结点的链路组成；结点可以是计算机、集线器、交换机、路由器等

**互连网**：网络之间通过路由器连接，构成更大的网络，就是互连网，是网络的网络

**主机(host)**：与网络相连的计算机

## 2.互联网的组成

​    从其工作方式上，分成两大部分：
   **边缘部分**：由互联网上的主机组成，是用户直接使用的部分，用来进行通信和资源共享
   **核心部分**：由大量网络和连接这些网络的路由器组成，是为边缘部分提供服务的，提供连通性和交换

### 2.1边缘部分：

端系统：主机

计算机之间的通信：主机A上的进程与主机B上的进程进行通信

端系统间通信方式：

*    **1.客户-服务器方式：**
        概述：是最常用与传统的方式，一方请求服务，一方提供服务，通信可以是单向的，也可以是双向的

        客户和服务器：指通信中涉及的两个应用进程

        主要特征：客户是服务请求方，服务器是服务提供方

        主要特点：

        **客户程序**：
           (1)用户调用后，在通信时主动向远地服务器发起通信(请求服务)。因此，客户程序必须知道服务器程序的地址
           (2)不需要特殊的硬件和很复杂的操作系统

        **服务器程序**：
            (1)是一种专门提供服务的程序，可同时处理多个客户的请求
            (2)系统启动后即自动调用不断运行，被动等待接受客户的通信请求。因此，服务器程序不需要知道客户程序的地址
            (3)一般需要强大的硬件和操作系统支持



*   **2.对等连接方式(P2P)：**
        概述：两台主机不区分服务器和客户，只要都运行p2p软件，就可以进行平等对等连接通信，双方都可访问对方硬盘中的共享文档。可支持大量对等用户同时工作

### 2.2核心部分

路由器的重要性：路由器是一种专用计算机，是实现分组交换的关键部件，其任务是转发收到的分组，这是网络核心部分最重要的功能

交换：按照某种方式动态分配传输线路的资源

三种交换方式：

**(1)电路交换：**
    工作方式：在两用户端间建立一条专用的物理通路，保证了双方通信所需的通信资源，而这些资源在双方通信时也不会被其他用户占用
    三个步骤：建立连接(占用通信资源)->通话(一直占用通信资源)->释放连接(归还通信资源)
    重要特点：在通话的全部时间内，通话的两个用户始终占用端到端的通信资源
**(2)报文交换**：
    特点：整个报文先传送到相邻结点，全部存储下来后查找转发表，转发给下一个结点

**(3)*分组交换：**
    工作方式：采用存储转发技术，把一个报文划分为几个分组后进行传送

报文：要发送的整块数据
分组：把较长的报文分成更小的等长数据段，再加上必要的控制信息组成的首部后，就构成一个分组；分组又称包，分组的首部又称包头
**首部的重要性**：包含了诸如目的地址和源地址等重要控制信息，使每一个分组才能独立的选择传输路径，并正确交付到终点
**存储转发技术**：路由器收到分组后，先暂时存储，检查其首部，查找转发表，按照首部中目的地址，选择合适的接口转发出去

**优点**：
    **高效**：在分组传输过程动态分配传输带宽，对通信链路逐段占用
    **灵活**：为每个分组独立选择最合适的转发路由
    **迅速**：以分组为单位传输，不用建立和释放连接
    **可靠**：保证可靠性的网络协议；分布式多路由器的分组交换网，有很好的生存性

三种交换的特点概述：

**(1)电路交换**：整个报文的比特流连续的从源点直达终点，好像在管道中传送
**(2)报文交换**：整个报文先传送到相邻结点，全部存储下来后查找转发表，转发给下一个结点
**(3)分组交换**：单个分组传送到相邻结点，存储下来后查找转发表，转发给下一个结点

## 3.计算机网络的类别

***按照网络的作用范围分类**：

**广域网(WAN)**：作用范围几十到几千公里，是互联网的核心部分，其任务是通过长距离运送主机所发送的数据，广域网各结点采用高速链路，有较大通信容量
**城域网(MAN)**：作用范围一个城市，用来将多个局域网进行互联，多采用以太网技术
**局域网(LAN)**：作用范围1km左右，一般用微机或工作站通过高速通信线路相连
**个人区域网(PAN)**：作用范围10m左右，把个人工作的地方属于个人的设备用无线技术相连，也叫无线个人区域网(WPAN)

**按照网络的使用者分类**：

公用网：电信公司出资建造的大型网络，任何人都可付费使用，也称公众网
专用网：为满足特殊业务需要建立的网络，不向外人提供服务

用来把用户进入到互联网的网络：

接入网：又称本地接入网或居民接入网

## 4.计算机网络性能

***计算机网络的性能指标**：

**(1)速率：**
    定义：数据的传送速率；常指额定速率或标称速率，并不是实际的速率
    单位：bit/s(比特每秒)

**(2)带宽：**
    定义：表示网络中某通道传送数据的能力，即单位时间内网络中某信道能通过的最高数据率
    单位：bit/s

**(3)吞吐量：**
    定义：单位时间内通过某网络的实际的数据量
    单位：bit/s

**(4)时延：**
    定义：数据从网络的一段传送到另一端所需的时间；又称延迟或迟延
    组成：
        **(1)发送时延**：是主机或路由器发送数据帧所需要的时间
           发生位置：在机器内部的发送器中，即网络适配器中，与信道长度无关
           **计算公式**：![img](https://upload-images.jianshu.io/upload_images/26271761-dab58dd631454a13.png?imageMogr2/auto-orient/strip|imageView2/2/w/245/format/webp)

​        (2)**传播时延**：是电磁波在信道中传播一定距离所需要的时间

​           发生位置：在机器外部的传输信道媒体上，与信号的发送速率无关，只与信号传送的距离有关

​           **计算公式**：![img](https://upload-images.jianshu.io/upload_images/26271761-8c8653de18f5e7cf.png?imageMogr2/auto-orient/strip|imageView2/2/w/376/format/webp)

<!--电磁波在在不同介质中传播速率不同，在自由空间中为光速3*10^5 km/s；在铜线中为2.3*10^5 km/s；在光纤中为2.0*10^5 km/s-->

​        (3)**处理时延**：主机或路由器收到分组后处理分组所用的时间；如分析首部、提取数据、差错检验、转发路由查找等

​        (4)**排队时延**：分组经过路由器时，在路由器中经历输入和输出的排队等待时间

​            发生位置：各中转路由器中；取决于网络的通信量，通信量很大时会发生队列溢出，使分组丢失，相当于时延无限大

​           <u>总时延=发送时延+传播时延+处理时延+排队时延</u>

​        (5)**时延带宽积**：

​             定义：![img](https://upload-images.jianshu.io/upload_images/26271761-f4c26bc0e1ed4217.png?imageMogr2/auto-orient/strip|imageView2/2/w/273/format/webp)(6)**往返时间RTT**：

​     定义：双向交互一次所需的时间；包含中间各结点的处理时延、排队时延、转发数据时的发送时延

​        (7)**利用率**：

​     **信道利用率**：指某信道有百分之几的时间是被利用的

​     **网络信道利用率**：全网络的信道利用率的加权平均数

​     D=D0/1-U  其中D是网络时延、D0是空闲时网络时延、U是利用率

​     **特点**：信道或网络利用率过高会产生非常大的时延

**计算机网络的非性能指标****：**

  (1)费用 (2)质量 (3)标准化 (4)可靠性 (5)可扩展性和可升级性(6)易于管理和维护

## 5.计算机网络体系结构

### 5.1协议与划分层次

**网络协议(协议)**：为进行网络中的数据交换而建立的规则、标准或约定

**计算机网络体系结构**：计算机网络各层及其协议的集合

**网络协议的三要素：**

  (1)语法：数据与控制信息的结构或格式

  (2)语义：需要发出何种控制信息，完成何种动作以及做出何种响应

  (3)同步：事件实现顺序的详细说明

**分层的优点：**

  (1)各层之间是独立的：某一层不需要知道下一次如何实现，只需要知道接口提供的服务

  (2)灵活性高：当一层发生变化时，只要保证接口不变，就能方便修改

  (3)结构上可分割：各层都可以采用最合适的技术实现

  (4)易于实现和维护：这种结构使实现和调试一个庞大复杂的系统更容易，因为整个系统以被分解成若干相对独立的子系统

  (5)促进标准化：因每一层的功能及其提供的服务都已精确说明

**各层要完成的主要功能：**

  (1)差错控制：使相应层次对等方的通信更可靠

  (2)流量控制：发送端的发送速率必须使接收端来得及接受

  (3)分段和重装：发送端将要发送的数据块划分为更小单位，在接收端将其还原

  (4)复用和分用：发送端几个高层会话复用一条低层的连接，在接收端再进行分用

  (5)连接建立和释放：交换数据前先建立一条逻辑连接，数据传送结束后释放连接

### 5.2各协议的体系结构

![img](https://upload-images.jianshu.io/upload_images/26271761-6f8237100a7c9288.png?imageMogr2/auto-orient/strip|imageView2/2/w/576/format/webp)

各层功能概述：

  (1)**应用层**：

​     作用：通过应用进程间的交互来完成特定网络应用，应用层协议定义的是应用进程间通信和交互的规则

​     常见协议：DNS、HTTP、SMTP等

​     报文：应用层交互的数据单元

  (2)**运输层**：

​     作用：负责向两台主机中进程之间的通信提供通用的数据传输服务，应用进程利用该服务传送应用层报文；通用指多种应用可以使用同一运输层服务；有复用和分用功能

​     分用和复用：复用是多个应用层进程可同时使用下面运输层的服务，分用是运输层把收到的信息分别交付上面应用层中的相应进程

​     **主要协议**：

​       **传输控制协议TCP**：提供面向连接的、可靠的数据传输服务，数据传输的单位是报文段

​       用户数据报协议UDP：提供无连接的、尽最大努力的数据传输服务，数据传输的单位是用户数据报

  (3**)网络层**：

​     作用：负责为分组交换网上不同主机提供通信服务。在发送数据时，网络层把运输层产生的报文段或用户数据报封装成分组或包进行传送；选择合适路由，使运输层传下来的分组能通过网络中的路由器找到目的主机

​     主要协议：IP协议、多种路由选择协议

  (4)**数据链路层**：

​     作用：负责两主机间链路上的传输；将网络层交下来的IP数据报组装成帧，在两个相邻结点间的链路上传送帧，帧中包含数据和必要的控制信息；在接收数据时，提取出数据部分交给网络层；通过控制信息监测差错，丢弃差错帧或纠正错误

  (5)**物理层**：

​     作用：考虑用多大电压代表0或1，如何识别对方发送的比特；确定电缆插头的物理结构

**数据在各层间传递过程**：![img](https://upload-images.jianshu.io/upload_images/26271761-647d5a06ebe23dc0.png?imageMogr2/auto-orient/strip|imageView2/2/w/622/format/webp)

### 5.3实体、协议、服务、服务访问点

实体：表示任何可发送或接受信息的硬件或软件进程；很多情况下，实体就是一个特点的软件模块

协议：控制两个或多个对等实体进行通信的规则的集合

服务：由下层向上层通过层间接口提供的功能

服务访问点：在同一系统相邻两层的时间进行交互的地方

协议与服务：在协议的控制下，两个对等实体间的通信使得本层能够向上一层提供服务。要实现本层协议，还需要使用下面层提供的服务；

​            协议是"水平的"，即协议是控制对等实体间通信的规则，服务是"垂直的"，即服务是由下层向上层通过接口提供的

### 5.4TCP/IP体系结构

![img](https://upload-images.jianshu.io/upload_images/26271761-9163bb70c6ad9d85.png?imageMogr2/auto-orient/strip|imageView2/2/w/248/format/webp)

![img](https://upload-images.jianshu.io/upload_images/26271761-dec59b278ef82cf2.png?imageMogr2/auto-orient/strip|imageView2/2/w/463/format/webp)

 <u>TCP/IP协议可为各式各样的应用提供服务(everthing over IP)；TCP/IP也允许IP协议在各式各样的网络构成的互联网上运行(IP over everthing)</u>

------

## 习题：

17.收发两端间的传输距离为1000km，信号在媒体上的传播速率为2*10^8 m/s。计算以下两种情况的发送时延和传播时延

   (1)数据长度为10^7 bit，**数据发送速率为**100 kbit/s

   (2)数据长度为10^3 bit，数据发送速率为1 Gbit/s

   解：

​     (1)发送时延=数据长度/发送速率=10^7/100*10^3=100s

​       传播时延=距离/传播速率=1000*10^3/2*10^8=5*10^-3 s

​     (2)发送时延=10^3/10^9=1*10^-6 s

​       传播时延=5 ms

18.假设信号在媒体上的传播速率为2.3*10^8 m/s。媒体长度L分别为：

  (1)10cm

  (2)100m

  (3)100km

  (4)5000km

  计算当前数据率为1Mbit/s和10Gbit/s时在以上媒体中正在传播的比特数

  解：即求带宽时延积

​     (1)传播时延=长度/传播速率=10*10^-2 / 2.3*10^8 = 4.35*10^-10

​       数据率为1Mbit/s时：带宽时延积=带宽*传播时延=1*10^6*4.35*10^-10=4.35*10^-4

​       数据率为10Gbit/s时：带宽时延积=10*10^9*4.35*10^-10=4.35

​     (2)(3)(4)......

29.有一个点对点链路，长度为50km。若数据在此链路上传播速度为2*10^8 m/s，求链路的带宽应为多少才能使传播时延和发送100字节的分组发送时延一样大？如果发送的是512字节长的分组，结果又如何？

  解：

​     传播时延=长度/传播速率=50*10^3/2*10^8 = 2.5*10^-4 s

​     发送时延=数据长度/发送速率=100*8/ x = 2.5*10^-4 ；x=3.2*10^6 bis/s = 3.2 Mbit/s

​     若发送512字节分组：

​       发送时延=数据长度/发送速率 = 512*8/ x = 2.5*10^-4 

​       x=16.38*10^6 bit/s = 16.38 Mbit/s

